(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1277:function(e,t){},1280:function(e,t){},1295:function(e,t){},1296:function(e,t){},1304:function(e,t,n){},1305:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(48),i=n.n(s),c=(n(552),n(324)),o=n(91),u=n(5),p=n.n(u),l=n(63),y=n(64),d=n(522),b=n(523),m=new d.a({supportedChainIds:[1,3,4,5,80001]}),j=new b.a({dAppId:"3ca5aba8-016e-4e79-bcff-fadc16aa76b1",networks:[1,5,15001]}),f=n(1328),g=n(1331),h=n(1308),O=n(1341),x=n(1332),T=n(103),v=n(15),w={appbar:{background:"transparent",boxShadow:"none",backdropFilter:"blur(15px)",marginTop:10}},S=function(){var e=Object(o.b)(),t=e.account,n=e.activate;return Object(v.jsx)(f.a,{position:"static",style:w.appbar,children:Object(v.jsxs)(g.a,{container:!0,children:[Object(v.jsx)(g.a,{item:!0,xs:12,sm:6,children:Object(v.jsx)(h.a,{variant:"h4",color:"textPrimary",children:"COVINSURANCE"})}),Object(v.jsxs)(g.a,{container:!0,item:!0,xs:12,sm:6,spacing:2,alignItems:"center",justify:"flex-end",children:[t&&Object(v.jsx)(g.a,{item:!0,children:Object(v.jsx)(O.a,{address:t})}),Object(v.jsx)(g.a,{item:!0,children:Object(v.jsx)(x.a,{onClick:function(){return n(m)},children:"Metamask"})}),Object(v.jsx)(g.a,{item:!0,children:Object(v.jsx)(T.a,{mainColor:"#805ad5",onClick:function(){return n(j)},fullWidth:!0,children:Object(v.jsxs)(g.a,{container:!0,alignItems:"center",spacing:1,children:[Object(v.jsx)(g.a,{item:!0,children:Object(v.jsx)("img",{src:"https://www.portis.io/static/logo-small.svg",alt:"portis-logo",width:15})}),Object(v.jsx)(g.a,{item:!0,children:"Portis"})]})})})]})]})})},k=n(163),C=[{inputs:[{internalType:"contract ISuperfluid",name:"host",type:"address"},{internalType:"contract IConstantFlowAgreementV1",name:"cfa",type:"address"},{internalType:"contract ISuperToken",name:"acceptedToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"UnderlyingTokenTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"}],name:"UserRegistered",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"addressesRegistered",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"addressesSendingPremiumsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"ctx",type:"bytes"}],name:"afterAgreementCreated",outputs:[{internalType:"bytes",name:"newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"ctx",type:"bytes"}],name:"afterAgreementTerminated",outputs:[{internalType:"bytes",name:"newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"afterAgreementUpdated",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementCreated",outputs:[{internalType:"bytes",name:"cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementTerminated",outputs:[{internalType:"bytes",name:"cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementUpdated",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllRegisteredAddresses",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAddressRegistered",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAddressSendingPremiums",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"locationDecimals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"scaledLatitude",type:"uint256"},{internalType:"uint256",name:"scaledLongitude",type:"uint256"}],name:"registerUser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFDaiToAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userLocation",outputs:[{internalType:"uint256",name:"latitiude",type:"uint256"},{internalType:"uint256",name:"longitude",type:"uint256"}],stateMutability:"view",type:"function"}],I=n(1342),A=n(1340),M=n(1336),R=n(1337),F=n(1338),P=n(1339),D=function(e){var t=e.refresh,n=Object(o.b)(),r=n.account,s=n.library.getSigner(r),i=new k.a.Contract("",C,s),c=Object(a.useState)(!1),u=Object(y.a)(c,2),d=u[0],b=u[1],m=Object(a.useState)(null),j=Object(y.a)(m,2),f=j[0],g=(j[1],Object(a.useState)(null)),O=Object(y.a)(g,2),x=O[0],T=O[1],w=Object(a.useState)(null),S=Object(y.a)(w,2),D=S[0],L=S[1],U=Object(a.useState)(!1),E=Object(y.a)(U,2),z=E[0],Y=E[1],B={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},J=function(){var e=Object(l.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation&&navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?(console.log(e.state),navigator.geolocation.getCurrentPosition(t)):"prompt"===e.state?navigator.geolocation.getCurrentPosition(t,(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),B):e.state,e.onchange=function(){console.log(e.state)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{onClick:function(){return b(!0)},size:"large",variant:"outlined",children:Object(v.jsx)(h.a,{variant:"h2",children:"Register"})}),Object(v.jsxs)(A.a,{open:d,onClose:function(){return b(!1)},children:[Object(v.jsx)(M.a,{children:"Apply for Insurance"}),Object(v.jsxs)(R.a,{children:[z&&Object(v.jsx)(F.a,{}),null===f&&!z&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(F.a,{}),"Querying Registraion Status"]}),!1===f&&Object(v.jsx)("h5",{children:"You need to get registered"})]}),Object(v.jsx)(P.a,{children:null===x||null===D?Object(v.jsx)(I.a,{onClick:Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Checking the documents"),e.next=3,J((function(e){var t=e.coords,n=t.latitude,a=t.longitude;T(n),L(a),console.log("Fetched latitude ".concat(n," and longitude ").concat(a))}));case 3:case"end":return e.stop()}}),e)}))),children:"Scan Documents"}):Object(v.jsx)(I.a,{onClick:Object(l.a)(p.a.mark((function e(){var n,a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.locationDecimals();case 2:return n=e.sent,console.log("Decimals for location: ".concat(n)),a=Math.floor(x*Math.pow(10,n)),r=Math.floor(D*Math.pow(10,n)),console.log("Scaled Latitude: ".concat(a,", Scaled Longitude: ").concat(r)),console.log("Sending transaction to register user..."),Y(!0),e.next=11,i.registerUser(a,r);case 11:s=e.sent,console.log("Transaction: ",s),Y(!1),b(!1),t();case 16:case"end":return e.stop()}}),e)}))),children:"Register"})})]})]})},L=function(){var e=Object(l.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=n(618),E=function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new U.Framework({ethers:new c.a(window.ethereum)}),e.next=3,t.initialize();case 3:return console.log("Initialized Superfluid SDK"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(p.a.mark((function e(t,n,a,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.user({address:n,token:""}),e.next=3,s.flow({recipient:a,flowRate:t});case 3:return e.t0=console,e.next=6,s.details();case 6:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Y=function(e){var t=e.refresh,n=Object(o.b)().account,r=Object(a.useState)(!1),s=Object(y.a)(r,2),i=s[0],c=s[1],u=Object(a.useState)(!1),d=Object(y.a)(u,2),b=d[0],m=d[1],j=Object(a.useState)(null),f=Object(y.a)(j,2),g=f[0],O=f[1],x=Object(a.useState)(null),T=Object(y.a)(x,2),w=T[0],S=T[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(n);case 2:return t=e.sent,console.log("Premium Rate for user: ".concat(t," fDAI/s")),O(t),console.log("Setting up superfluid framework..."),e.t0=S,e.next=9,E();case 9:e.t1=e.sent,(0,e.t0)(e.t1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){})).catch(console.log)}),[n]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{onClick:function(){return c(!0)},size:"large",variant:"outlined",children:Object(v.jsx)(h.a,{variant:"h3",children:"Apply for an Insurance"})}),Object(v.jsxs)(A.a,{open:i,onClose:function(){return c(!1)},children:[Object(v.jsx)(M.a,{children:"Apply for Insurance"}),Object(v.jsxs)(R.a,{children:[b&&Object(v.jsx)(F.a,{}),g&&!b&&Object(v.jsxs)("h4",{children:["Your premium rate is ",g," x 10",Object(v.jsx)("sup",{children:"-18"})," fDAI/s"]})]}),Object(v.jsx)(P.a,{children:g&&Object(v.jsx)(I.a,{onClick:Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,z(g,n,"",w);case 3:m(!1),c(!1),t();case 6:case"end":return e.stop()}}),e)}))),children:"Start Payments"})})]})]})},B=function(){var e=Object(o.b)(),t=e.account,n=e.library,r=Object(a.useState)(null),s=Object(y.a)(r,2),i=s[0],c=s[1],u=Object(a.useState)(null),d=Object(y.a)(u,2),b=d[0],m=d[1],j=Object(a.useState)(!1),f=Object(y.a)(j,2),g=f[0],O=f[1],x=function(){return O(!g)};return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(p.a.mark((function e(){var a,r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getSigner(t),r=new k.a.Contract("",C,a),e.next=4,r.isAddressRegistered(t);case 4:return(s=e.sent)?console.log("".concat(t," is registered")):console.log("".concat(t," is not registred")),c(s),e.next=9,r.isAddressSendingPremiums(t);case 9:(i=e.sent)?console.log("".concat(t," is paying premiums")):console.log("".concat(t," is not paying premiums")),m(i);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){})).catch(console.log)}),[t,i,n,g]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{}),Object(v.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[!i&&Object(v.jsx)(h.a,{variant:"h2",children:"Instant hassle-free Covid Insurance Cover at your doorstep."}),i&&!b&&Object(v.jsx)(h.a,{variant:"h2",children:"Once you start paying the premiums you'll recieve a payout based on the plan opted and scanned covid documents."}),b&&Object(v.jsx)(h.a,{variant:"h2",children:"You are now insured!"})]}),Object(v.jsxs)("div",{style:{position:"absolute",left:"50%",top:"70%",transform:"translate(-50%, -50%)"},children:[t&&(i?!b&&Object(v.jsx)(Y,{refresh:x}):Object(v.jsx)(D,{refresh:x}))," "]})]})},J=(n(1304),function(){return Object(v.jsx)(o.a,{getLibrary:function(e,t){return new c.a(e)},children:Object(v.jsx)(B,{})})}),N=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,1344)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(J,{})}),document.getElementById("root")),N()},552:function(e,t,n){},604:function(e,t){},703:function(e,t){},705:function(e,t){},766:function(e,t){},768:function(e,t){},800:function(e,t){},805:function(e,t){},807:function(e,t){},814:function(e,t){},827:function(e,t){},916:function(e,t){},986:function(e,t){}},[[1305,1,2]]]);
//# sourceMappingURL=main.4da30e13.chunk.js.map